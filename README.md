ctrl + shift + v

## How to install and run
### Run the following path (from repository root):
cpabe-demo/src/main/java/co/junwei/cpabe/Demo.java

## How to define a policy

The policy is specified as a simple string which encodes a postorder traversal of threshold tree defining the access policy. As an example,

"(foo bar fim 2of3) (baf) 1of2"
      
left right root
     
 		         1of2
        2of3			 (baf)
    (foo) (bar) (fim)
 


              1of2
           2of2
        2of3 [loc=l1]			 (baf)
      (foo) (bar) (fim)

specifies a policy with two threshold gates and four leaves. It is not possible to specify an attribute with whitespace in it (although "_" is allowed).

Numerical attributes and any other fancy stuff are not supported.

An example with location:

"sn:student2!bbs cn:student2 uid:student2 2of3"

Use '!' to mention the location name.


## Code Overview

- cpabe -> wrapper for serialization/User interface.
- bswabe -> does the math.

## Addition for introducing trapdoors

- Added TrapDoor to BswabePolicy


- BswabePolicy -> Added Trapdoor.
- BswabePrv -> d_prime (used for exposing the trapdoor).
- SerializeUtils -> Added serialization/deserialization of trapdoor and node id.
- cpabe -> passing userLocation in decryption function.
- ElementStore -> holds the value of generator for easy access from anywhere.
- Location
  - location-name, format-description (location-hash), pairing
  - params: gamma_k, v_k, l_k.
  - contains a method to generate s_k_x.
  - can generateTrapdoor parameters Ax and Bx given s_k_x.
- LocationStore
  - Contains a map from (location-name -> l_k, node-id -> x) to (s_k_x).
  - Holds all the locations.
  - createToken
  - generateTrapdoor
    - takes the node-id and location-name as input, and generates the trapdoor with the help of Location#generateTrapdoor.
- Trapdoor
  - initialize -> location, node
    - it will generate Ax and Bx through LocationStore.
  - setToken -> allows us to save the token(generated by location store).
  - exposeTrapdoor -> we attempt to expose the trapdoor using the token we have.
  
- cpabe-demo
  - creates/adds location instances
  - creates an object of cpabe class and calls all four functions (setup, keygen, enc, dec)

- Bswabe
  - keygen -> added d-prime
  - enc -> changes in parsePolicyPostfix, parses the location by '!'
  - dec 
    - checkSatisfy -> checks if the user's attribute satisfies the policy tree
    - pickSatisfyMinLeaves -> makes a list of all the leaf nodes in the tree where user attribute satifies the policy.
    - decFlatten: initialises the r(secret) and calls decNodeFlatten
      - decNodeFlatten -> calls funtions for leaf node flattening and non-leaf node flattening
      - decLeafFlatten -> checks if trapdoor, then multiplies trapdoor exposed to the decryption function.
      - decInternalFlatten -> recursively checks the same as above.
      - parsePolicyPostfix -> node-id added, location parsed by '!'
      - elementFromString -> H1 function. {0, 1}* -> Element from G1*
      - elementFromElement -> H2 function. G1 -> Zp*